<%- model_class = Document -%>
<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human.pluralize.titleize %> You are assigned to</h1>
</div>
<% if has_role("supervisor") %>
  <%= link_to "Completed Documents", "?show_completed=true", class:"btn btn-default pull-right" %>
  <%= link_to "Incomplete Documents", "?show_completed=false", class:"btn btn-default pull-right" %>
  <%= link_to "Assigned Documents", workflow_document_index_path, class:"btn btn-default pull-right" %>
<% end %>
<table class="table table-striped">
  <thead>
    <tr>
      <th><%= model_class.human_attribute_name(:name) %></th>
      <th><%= model_class.human_attribute_name(:organization) %></th>
      <th><%= model_class.human_attribute_name(:workflow_step_id) %></th>
      <th><%=t '.actions', :default => t("helpers.actions") %></th>
    </tr>
  </thead>
  <tbody>
    <% @documents.each do |document| %>

        <tr>
          <td><%= link_to document.name, document_path(document.edit_id), id:"edit_document" %></td>
          <td><%= link_to(document.organization.slug, document_path(document.edit_id)) if document.organization %></td>
          <td><%= link_to(document.workflow_step.slug, document_path(document.edit_id)) if document.workflow_step_id %></td>
          <td>
            <% if has_role 'supervisor' %>
              <%= link_to "Versions", workflow_document_versions_path(document), :class => 'btn btn-default btn-xs' %>
              <%= link_to t('.edit', :default => t("helpers.links.edit")), edit_workflow_document_path(document.id), :class => 'btn btn-default btn-xs' %>
              <%= link_to t('.view', :default => t("helpers.links.view")), document_path(document.view_id), :class => 'btn btn-default btn-xs' %>
            <% else %>
              <%= link_to t('.edit', :default => t("helpers.links.edit")), document_path(document.edit_id), :class => 'btn btn-default btn-xs' %>
            <% end %>
          </td>
        </tr>
    <% end %>
  </tbody>
</table>
<%= paginate @documents%>
